<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preparing your login</title>
    <style>
    body {
        margin: 0;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: #fff;
    }
    .spinner {
        width: 64px;
        height: 64px;
        border: 8px solid transparent;
        border-top: 8px solid #007bff;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        background: none;
    }
    @keyframes spin {
        to { transform: rotate(360deg); }
    }
    </style>
</head>
<body>
    <div class="spinner"></div>
    <script>
        const params = new URLSearchParams(window.location.search)
        const redirectUrl = params.get('redirect_url')
        if (redirectUrl) {
            window.location.href = redirectUrl
        } else {
            document.body.innerHTML = `
                <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                        <circle cx="12" cy="12" r="10" stroke="#dc3545" stroke-width="2" fill="none"/>
                        <line x1="12" y1="8" x2="12" y2="13" stroke="#dc3545" stroke-width="2" stroke-linecap="round"/>
                        <circle cx="12" cy="16" r="1" fill="#dc3545"/>
                    </svg>
                    <div style="color:#dc3545;font-size:1.2em;margin-top:16px;text-align:center;">
                        Login Error: No redirect parameter specified. If this repeatedly occurs, create an <a target="_blank" href="https://github.com/The-Scratch-Channel/the-scratch-channel.github.io/issues/new?template=bug_report.md">issue</a>.
                    </div>
                </div>
            `
        }
    </script>
</body>
</html>